(()=>{var e={};e.id=123,e.ids=[123],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2382:(e,s,t)=>{Promise.resolve().then(t.bind(t,5245))},2895:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>w});var a=t(687),r=t(3210),l=t.n(r),n=t(6189),i=t(9850),d=t(9523),c=t(4493),o=t(5950),x=t(1991);let m=(0,x.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var p=t(6349),u=t(4719);let h=(0,x.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),f=(0,x.A)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var j=t(5891),g=t(2581),N=t(4780),v=t(1087),b=t(474);let y=e=>{let s=Math.floor(e/60);return`${String(s).padStart(2,"0")}:${String(e%60).padStart(2,"0")}`};function w(){let e=(0,n.useRouter)();(0,n.useSearchParams)();let{items:s,getTotalPrice:t,clearCart:x}=(0,v.x)(),[w,C]=(0,r.useState)(null),[k,P]=(0,r.useState)(null),[A,R]=(0,r.useState)("pending"),[q,S]=(0,r.useState)(600),[_,I]=(0,r.useState)(!0),[$,X]=(0,r.useState)(null),[z,Z]=(0,r.useState)(!1),E=l().useRef(null),V=y(q),O=()=>{e.push("/checkout")},T=()=>{x(),e.push("/")};if(_)return(0,a.jsx)(i.O,{children:(0,a.jsx)("div",{className:"container mx-auto p-4 md:p-6 min-h-[80vh] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),(0,a.jsx)("p",{className:"text-lg font-semibold text-foreground",children:"Processando seu pagamento..."}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Aguarde enquanto geramos sua chave PIX"})]})})});if($)return(0,a.jsx)(i.O,{children:(0,a.jsx)("div",{className:"container mx-auto p-4 md:p-6 min-h-[80vh] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,a.jsx)("div",{className:"bg-destructive/10 p-4 rounded-full inline-block",children:(0,a.jsx)(m,{className:"h-12 w-12 text-destructive"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-destructive",children:"Erro no Pagamento"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:$.message}),$.details&&(0,a.jsxs)("div",{className:"text-left text-sm text-muted-foreground bg-destructive/5 p-4 rounded-lg mt-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-destructive mb-2",children:"Detalhes do erro:"}),(0,a.jsx)("pre",{className:"overflow-x-auto",children:JSON.stringify($.details,null,2)}),$.status&&(0,a.jsxs)("p",{className:"mt-2",children:["C\xf3digo de status: ",$.status]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.$,{onClick:O,className:"w-full",children:"Tentar novamente"}),(0,a.jsx)(d.$,{onClick:T,variant:"outline",className:"w-full",children:"Voltar para o in\xedcio"})]})]})})});if(!k||!k.pixKey)return(0,a.jsx)(i.O,{children:(0,a.jsx)("div",{className:"container mx-auto p-4 md:p-6 min-h-[80vh] flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center space-y-4 max-w-md",children:[(0,a.jsx)("div",{className:"bg-destructive/10 p-4 rounded-full inline-block",children:(0,a.jsx)(m,{className:"h-12 w-12 text-destructive"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-destructive",children:"Erro no Pagamento"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"N\xe3o foi poss\xedvel obter a chave PIX. Tente novamente."}),(0,a.jsx)(d.$,{onClick:O,className:"w-full",children:"Voltar para o checkout"})]})})});let W=k.pixKey.substring(0,40)+"...";return(0,a.jsx)(i.O,{children:(0,a.jsx)("div",{className:"container mx-auto p-4 md:p-6 min-h-[80vh]",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[(0,a.jsx)("div",{className:"relative h-10 w-24 mx-auto mb-2",children:(0,a.jsx)(b.default,{src:"/images/pix-logo-full.png",alt:"Logo PIX",layout:"fill",objectFit:"contain"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground",children:"Pagamento via PIX"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Copie a chave PIX para pagar"})]}),(0,a.jsxs)("div",{className:"flex justify-center",children:["pending"===A&&(0,a.jsxs)("div",{className:"bg-yellow-500/10 p-3 rounded-full inline-flex items-center gap-2",children:[(0,a.jsx)(p.A,{className:"h-5 w-5 text-yellow-500"}),(0,a.jsx)("span",{className:"font-medium text-yellow-600",children:"Aguardando pagamento"})]}),"approved"===A&&(0,a.jsxs)("div",{className:"bg-success/10 p-3 rounded-full inline-flex items-center gap-2",children:[(0,a.jsx)(u.A,{className:"h-5 w-5 text-success"}),(0,a.jsx)("span",{className:"font-medium text-success",children:"Pagamento confirmado!"})]}),"expired"===A&&(0,a.jsxs)("div",{className:"bg-destructive/10 p-3 rounded-full inline-flex items-center gap-2",children:[(0,a.jsx)(m,{className:"h-5 w-5 text-destructive"}),(0,a.jsx)("span",{className:"font-medium text-destructive",children:"QR Code expirado"})]})]}),"pending"===A&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 bg-muted p-2 rounded-lg",children:[(0,a.jsx)(p.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-mono text-lg font-semibold text-foreground",children:V})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Tempo restante para pagar"})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:(0,a.jsx)("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-1000 ease-linear",style:{width:`${q/600*100}%`}})})]}),(0,a.jsxs)(c.Zp,{className:"bg-white shadow-lg",children:[(0,a.jsx)(c.aR,{className:"pb-3",children:(0,a.jsxs)(c.ZB,{className:"text-xl font-semibold flex items-center justify-between",children:["Chave PIX (Copia e Cola)",(0,a.jsxs)(d.$,{variant:"ghost",size:"lg",onClick:()=>{k?.pixKey&&(navigator.clipboard.writeText(k.pixKey),g.oR.success("Chave PIX copiada para a \xe1rea de transfer\xeancia!"))},className:"text-green-700 hover:text-green-800 text-lg font-bold animate-slow-pulse",children:[(0,a.jsx)(h,{className:"h-5 w-5 mr-2"})," Copiar Chave"]})]})}),(0,a.jsxs)(c.Wu,{className:"pt-0",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground break-all font-mono bg-muted p-3 rounded-md",children:W}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Copie esta chave e cole na \xe1rea PIX Copia e Cola do aplicativo do seu banco para pagar."})]}),(0,a.jsx)(d.$,{variant:"link",onClick:()=>{E.current&&E.current.scrollIntoView({behavior:"smooth",block:"start"})},className:"p-0 h-auto mt-4 text-blue-800 hover:text-blue-900 font-semibold",children:"N\xe3o sabe como pagar? Clique aqui!"})]})]}),(0,a.jsx)("div",{className:"fixed right-4 top-1/2 transform -translate-y-1/2 z-10",children:(0,a.jsx)(d.$,{variant:"outline",size:"icon",className:"rounded-full h-12 w-12 shadow-lg",onClick:()=>Z(!z),children:z?(0,a.jsx)(f,{className:"h-5 w-5"}):(0,a.jsx)(j.A,{className:"h-5 w-5"})})}),z&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-20 flex items-center justify-center p-4",children:(0,a.jsxs)(c.Zp,{className:"bg-white shadow-lg max-w-md w-full",children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{className:"text-xl font-semibold",children:"Resumo do Pedido"})}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-muted-foreground",children:"Valor total:"}),(0,a.jsx)("span",{className:"text-xl font-bold text-primary",children:(0,N.v)(k.amount)})]}),(0,a.jsx)(o.w,{}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"font-semibold text-foreground",children:"Itens do pedido:"}),(0,a.jsx)("ul",{className:"space-y-1 text-sm",children:s.map((e,s)=>(0,a.jsxs)("li",{className:"flex justify-between",children:[(0,a.jsxs)("span",{className:"text-muted-foreground",children:[e.quantity,"x ",e.product.name]}),(0,a.jsx)("span",{className:"font-medium",children:(0,N.v)(e.quantity*(e.details?.selectedVariation?.option.price||e.product.price))})]},s))})]}),(0,a.jsx)(d.$,{onClick:()=>Z(!1),className:"w-full mt-4",children:"Fechar"})]})]})}),(0,a.jsxs)(c.Zp,{className:"bg-red-600 shadow-lg text-white",ref:E,children:[(0,a.jsx)(c.aR,{className:"border-b border-red-700",children:(0,a.jsx)(c.ZB,{className:"text-xl font-semibold",children:"Como pagar"})}),(0,a.jsx)(c.Wu,{className:"space-y-4",children:(0,a.jsxs)("ol",{className:"space-y-3 text-white",children:[(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-white text-red-600 flex items-center justify-center text-xs font-bold",children:"1"}),(0,a.jsx)("span",{children:"Abra o aplicativo do seu banco"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-white text-red-600 flex items-center justify-center text-xs font-bold",children:"2"}),(0,a.jsx)("span",{children:'Selecione a op\xe7\xe3o "Pagar com PIX" ou "PIX Copia e Cola"'})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-white text-red-600 flex items-center justify-center text-xs font-bold",children:"3"}),(0,a.jsx)("span",{children:"Cole a chave PIX copiada acima"})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-white text-red-600 flex items-center justify-center text-xs font-bold",children:"4"}),(0,a.jsxs)("span",{children:["Confirme o pagamento no valor de ",(0,N.v)(k.amount)]})]}),(0,a.jsxs)("li",{className:"flex items-start gap-2",children:[(0,a.jsx)("span",{className:"flex-shrink-0 w-5 h-5 rounded-full bg-white text-red-600 flex items-center justify-center text-xs font-bold",children:"5"}),(0,a.jsx)("span",{children:"Aguarde a confirma\xe7\xe3o (geralmente instant\xe2nea)"})]})]})})]}),"approved"===A&&(0,a.jsx)(c.Zp,{className:"bg-success/5 border-success",children:(0,a.jsxs)(c.Wu,{className:"text-center space-y-4 p-6",children:[(0,a.jsx)("div",{className:"bg-success/10 p-4 rounded-full inline-block",children:(0,a.jsx)(u.A,{className:"h-12 w-12 text-success"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-success",children:"Pagamento Confirmado!"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Seu pedido foi pago com sucesso e est\xe1 sendo preparado."}),(0,a.jsx)(d.$,{onClick:T,className:"bg-success hover:bg-success/90 text-success-foreground",children:"Voltar para a p\xe1gina inicial"})]})}),"expired"===A&&(0,a.jsx)(c.Zp,{className:"bg-destructive/5 border-destructive",children:(0,a.jsxs)(c.Wu,{className:"text-center space-y-4 p-6",children:[(0,a.jsx)("div",{className:"bg-destructive/10 p-4 rounded-full inline-block",children:(0,a.jsx)(m,{className:"h-12 w-12 text-destructive"})}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-destructive",children:"QR Code Expirado"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"O tempo para pagar expirou. Por favor, fa\xe7a um novo pedido."}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.$,{onClick:O,className:"w-full",children:"Tentar novamente"}),(0,a.jsx)(d.$,{onClick:T,variant:"outline",className:"w-full",children:"Voltar para o in\xedcio"})]})]})})]})})})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4106:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,pages:()=>o,routeModule:()=>m,tree:()=>c});var a=t(5239),r=t(8088),l=t(8170),n=t.n(l),i=t(893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let c={children:["",{children:["pix-payment",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,5245)),"/app/frontend/src/app/pix-payment/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,4431)),"/app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,5284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,o=["/app/frontend/src/app/pix-payment/page.tsx"],x={require:t,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/pix-payment/page",pathname:"/pix-payment",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},4493:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i});var a=t(687),r=t(3210),l=t(4780);let n=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...s}));n.displayName="Card";let i=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let d=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",e),...s}));d.displayName="CardTitle",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s})).displayName="CardDescription";let c=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",r.forwardRef(({className:e,...s},t)=>(0,a.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},5245:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/frontend/src/app/pix-payment/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/frontend/src/app/pix-payment/page.tsx","default")},5891:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1991).A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},8726:(e,s,t)=>{Promise.resolve().then(t.bind(t,2895))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[983,858,817,850],()=>t(4106));module.exports=a})();